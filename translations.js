// SystÃ¨me de traduction multilingue
const translations = {
    fr: {
        // Navigation
        'nav.home': 'Accueil',
        'nav.about': 'Ã€ propos',
        'nav.projects': 'Projets',
        'nav.skills': 'CompÃ©tences',
        'nav.services': 'Services',
        'nav.contact': 'Contact',
        
        // Page d'accueil
        'home.title': 'Youssef M - DÃ©veloppeur Full Stack',
        'home.subtitle': 'Ã‰tudiant en Master MIAGE, passionnÃ© par le dÃ©veloppement web et mobile',
        'home.viewProjects': 'Voir mes projets',
        'home.downloadCv': 'TÃ©lÃ©charger CV',
        
        // Contact
        'contact.title': 'Contactez-moi',
        'contact.name': 'Nom',
        'contact.namePlaceholder': 'Votre nom',
        'contact.email': 'Email',
        'contact.emailPlaceholder': 'Votre email',
        'contact.message': 'Message',
        'contact.messagePlaceholder': 'Votre message',
        'contact.send': 'Envoyer',
        
        // Ã€ propos
        'about.title': 'Ã€ propos de moi',
        'about.intro': 'Ã‰tudiant en Master MIAGE Ã  l\'UniversitÃ© de Versailles Saint-Quentin, je suis passionnÃ© par le dÃ©veloppement web et mobile.',
        'about.education': 'Formation',
        'about.experience': 'ExpÃ©rience',
        'about.languages': 'Langues',
        
        // Projets
        'projects.title': 'Mes Projets',
        'projects.viewProject': 'Voir le projet',
        'projects.sourceCode': 'Code source',
        
        // CompÃ©tences
        'skills.title': 'Mes CompÃ©tences',
        'skills.frontend': 'Frontend',
        'skills.backend': 'Backend',
        'skills.database': 'Base de donnÃ©es',
        'skills.tools': 'Outils',
        
        // Services
        'services.title': 'Mes Services',
        'services.webDev': 'DÃ©veloppement Web',
        'services.mobileDev': 'DÃ©veloppement Mobile',
        'services.consulting': 'Consultation',
        
        // Merci
        'thanks.title': 'ğŸ‰ Merci pour votre message !',
        'thanks.message': 'Votre message a Ã©tÃ© envoyÃ© avec succÃ¨s. Je vous contacterai trÃ¨s bientÃ´t.',
        'thanks.backHome': 'Retour Ã  l\'accueil',
        'thanks.viewProjects': 'Voir mes projets'
    },
    
    en: {
        // Navigation
        'nav.home': 'Home',
        'nav.about': 'About',
        'nav.projects': 'Projects',
        'nav.skills': 'Skills',
        'nav.services': 'Services',
        'nav.contact': 'Contact',
        
        // Home page
        'home.title': 'Youssef M - Full Stack Developer',
        'home.subtitle': 'Master\'s student in MIAGE, passionate about web and mobile development',
        'home.viewProjects': 'View my projects',
        'home.downloadCv': 'Download CV',
        
        // Contact
        'contact.title': 'Contact me',
        'contact.name': 'Name',
        'contact.namePlaceholder': 'Your name',
        'contact.email': 'Email',
        'contact.emailPlaceholder': 'Your email',
        'contact.message': 'Message',
        'contact.messagePlaceholder': 'Your message',
        'contact.send': 'Send',
        
        // About
        'about.title': 'About me',
        'about.intro': 'Master\'s student in MIAGE at the University of Versailles Saint-Quentin, I am passionate about web and mobile development.',
        'about.education': 'Education',
        'about.experience': 'Experience',
        'about.languages': 'Languages',
        
        // Projects
        'projects.title': 'My Projects',
        'projects.viewProject': 'View project',
        'projects.sourceCode': 'Source code',
        
        // Skills
        'skills.title': 'My Skills',
        'skills.frontend': 'Frontend',
        'skills.backend': 'Backend',
        'skills.database': 'Database',
        'skills.tools': 'Tools',
        
        // Services
        'services.title': 'My Services',
        'services.webDev': 'Web Development',
        'services.mobileDev': 'Mobile Development',
        'services.consulting': 'Consulting',
        
        // Thanks
        'thanks.title': 'ğŸ‰ Thank you for your message!',
        'thanks.message': 'Your message has been sent successfully. I will contact you very soon.',
        'thanks.backHome': 'Back to home',
        'thanks.viewProjects': 'View my projects'
    },
    
    ru: {
        // Navigation
        'nav.home': 'Ğ“Ğ»Ğ°Ğ²Ğ½Ğ°Ñ',
        'nav.about': 'Ğ ÑĞµĞ±Ğµ',
        'nav.projects': 'ĞŸÑ€Ğ¾ĞµĞºÑ‚Ñ‹',
        'nav.skills': 'ĞĞ°Ğ²Ñ‹ĞºĞ¸',
        'nav.services': 'Ğ£ÑĞ»ÑƒĞ³Ğ¸',
        'nav.contact': 'ĞšĞ¾Ğ½Ñ‚Ğ°ĞºÑ‚Ñ‹',
        
        // Home page
        'home.title': 'Ğ®ÑĞµÑ„ Ğœ - Full Stack Ğ Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‡Ğ¸Ğº',
        'home.subtitle': 'Ğ¡Ñ‚ÑƒĞ´ĞµĞ½Ñ‚ Ğ¼Ğ°Ğ³Ğ¸ÑÑ‚Ñ€Ğ°Ñ‚ÑƒÑ€Ñ‹ MIAGE, ÑƒĞ²Ğ»ĞµÑ‡Ñ‘Ğ½Ğ½Ñ‹Ğ¹ Ğ²ĞµĞ± Ğ¸ Ğ¼Ğ¾Ğ±Ğ¸Ğ»ÑŒĞ½Ğ¾Ğ¹ Ñ€Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ¾Ğ¹',
        'home.viewProjects': 'ĞŸĞ¾ÑĞ¼Ğ¾Ñ‚Ñ€ĞµÑ‚ÑŒ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ñ‹',
        'home.downloadCv': 'Ğ¡ĞºĞ°Ñ‡Ğ°Ñ‚ÑŒ Ñ€ĞµĞ·ÑĞ¼Ğµ',
        
        // Contact
        'contact.title': 'Ğ¡Ğ²ÑĞ·Ğ°Ñ‚ÑŒÑÑ ÑĞ¾ Ğ¼Ğ½Ğ¾Ğ¹',
        'contact.name': 'Ğ˜Ğ¼Ñ',
        'contact.namePlaceholder': 'Ğ’Ğ°ÑˆĞµ Ğ¸Ğ¼Ñ',
        'contact.email': 'Email',
        'contact.emailPlaceholder': 'Ğ’Ğ°Ñˆ email',
        'contact.message': 'Ğ¡Ğ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğµ',
        'contact.messagePlaceholder': 'Ğ’Ğ°ÑˆĞµ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğµ',
        'contact.send': 'ĞÑ‚Ğ¿Ñ€Ğ°Ğ²Ğ¸Ñ‚ÑŒ',
        
        // About
        'about.title': 'Ğ ÑĞµĞ±Ğµ',
        'about.intro': 'Ğ¡Ñ‚ÑƒĞ´ĞµĞ½Ñ‚ Ğ¼Ğ°Ğ³Ğ¸ÑÑ‚Ñ€Ğ°Ñ‚ÑƒÑ€Ñ‹ MIAGE Ğ² Ğ£Ğ½Ğ¸Ğ²ĞµÑ€ÑĞ¸Ñ‚ĞµÑ‚Ğµ Ğ’ĞµÑ€ÑĞ°Ğ»Ñ Ğ¡ĞµĞ½-ĞšĞ°Ğ½Ñ‚ĞµĞ½, ÑƒĞ²Ğ»ĞµÑ‡Ñ‘Ğ½ Ğ²ĞµĞ± Ğ¸ Ğ¼Ğ¾Ğ±Ğ¸Ğ»ÑŒĞ½Ğ¾Ğ¹ Ñ€Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ¾Ğ¹.',
        'about.education': 'ĞĞ±Ñ€Ğ°Ğ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ',
        'about.experience': 'ĞĞ¿Ñ‹Ñ‚',
        'about.languages': 'Ğ¯Ğ·Ñ‹ĞºĞ¸',
        
        // Projects
        'projects.title': 'ĞœĞ¾Ğ¸ ĞŸÑ€Ğ¾ĞµĞºÑ‚Ñ‹',
        'projects.viewProject': 'ĞŸĞ¾ÑĞ¼Ğ¾Ñ‚Ñ€ĞµÑ‚ÑŒ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚',
        'projects.sourceCode': 'Ğ˜ÑÑ…Ğ¾Ğ´Ğ½Ñ‹Ğ¹ ĞºĞ¾Ğ´',
        
        // Skills
        'skills.title': 'ĞœĞ¾Ğ¸ ĞĞ°Ğ²Ñ‹ĞºĞ¸',
        'skills.frontend': 'Frontend',
        'skills.backend': 'Backend',
        'skills.database': 'Ğ‘Ğ°Ğ·Ğ° Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…',
        'skills.tools': 'Ğ˜Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚Ñ‹',
        
        // Services
        'services.title': 'ĞœĞ¾Ğ¸ Ğ£ÑĞ»ÑƒĞ³Ğ¸',
        'services.webDev': 'Ğ’ĞµĞ±-Ñ€Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ°',
        'services.mobileDev': 'ĞœĞ¾Ğ±Ğ¸Ğ»ÑŒĞ½Ğ°Ñ Ñ€Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ°',
        'services.consulting': 'ĞšĞ¾Ğ½ÑÑƒĞ»ÑŒÑ‚Ğ°Ñ†Ğ¸Ğ¸',
        
        // Thanks
        'thanks.title': 'ğŸ‰ Ğ¡Ğ¿Ğ°ÑĞ¸Ğ±Ğ¾ Ğ·Ğ° Ğ²Ğ°ÑˆĞµ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğµ!',
        'thanks.message': 'Ğ’Ğ°ÑˆĞµ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğµ ÑƒÑĞ¿ĞµÑˆĞ½Ğ¾ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¾. Ğ¯ ÑĞ²ÑĞ¶ÑƒÑÑŒ Ñ Ğ²Ğ°Ğ¼Ğ¸ Ğ¾Ñ‡ĞµĞ½ÑŒ ÑĞºĞ¾Ñ€Ğ¾.',
        'thanks.backHome': 'ĞĞ° Ğ³Ğ»Ğ°Ğ²Ğ½ÑƒÑ',
        'thanks.viewProjects': 'ĞŸĞ¾ÑĞ¼Ğ¾Ñ‚Ñ€ĞµÑ‚ÑŒ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ñ‹'
    },
    
    ar: {
        // Navigation
        'nav.home': 'Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©',
        'nav.about': 'Ù†Ø¨Ø°Ø©',
        'nav.projects': 'Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹',
        'nav.skills': 'Ø§Ù„Ù…Ù‡Ø§Ø±Ø§Øª',
        'nav.services': 'Ø§Ù„Ø®Ø¯Ù…Ø§Øª',
        'nav.contact': 'Ø§ØªØµÙ„ Ø¨ÙŠ',
        
        // Home page
        'home.title': 'ÙŠÙˆØ³Ù Ù… - Ù…Ø·ÙˆØ± Full Stack',
        'home.subtitle': 'Ø·Ø§Ù„Ø¨ Ù…Ø§Ø¬Ø³ØªÙŠØ± ÙÙŠ MIAGEØŒ Ø´ØºÙˆÙ Ø¨ØªØ·ÙˆÙŠØ± Ø§Ù„ÙˆÙŠØ¨ ÙˆØ§Ù„Ø¬ÙˆØ§Ù„',
        'home.viewProjects': 'Ø¹Ø±Ø¶ Ù…Ø´Ø§Ø±ÙŠØ¹ÙŠ',
        'home.downloadCv': 'ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø³ÙŠØ±Ø© Ø§Ù„Ø°Ø§ØªÙŠØ©',
        
        // Contact
        'contact.title': 'Ø§ØªØµÙ„ Ø¨ÙŠ',
        'contact.name': 'Ø§Ù„Ø§Ø³Ù…',
        'contact.namePlaceholder': 'Ø§Ø³Ù…Ùƒ',
        'contact.email': 'Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ',
        'contact.emailPlaceholder': 'Ø¨Ø±ÙŠØ¯Ùƒ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ',
        'contact.message': 'Ø§Ù„Ø±Ø³Ø§Ù„Ø©',
        'contact.messagePlaceholder': 'Ø±Ø³Ø§Ù„ØªÙƒ',
        'contact.send': 'Ø¥Ø±Ø³Ø§Ù„',
        
        // About
        'about.title': 'Ù†Ø¨Ø°Ø© Ø¹Ù†ÙŠ',
        'about.intro': 'Ø·Ø§Ù„Ø¨ Ù…Ø§Ø¬Ø³ØªÙŠØ± ÙÙŠ MIAGE Ø¨Ø¬Ø§Ù…Ø¹Ø© ÙØ±Ø³Ø§ÙŠ Ø³Ø§Ù† ÙƒØ§Ù†ØªØ§Ù†ØŒ Ø´ØºÙˆÙ Ø¨ØªØ·ÙˆÙŠØ± Ø§Ù„ÙˆÙŠØ¨ ÙˆØ§Ù„Ø¬ÙˆØ§Ù„.',
        'about.education': 'Ø§Ù„ØªØ¹Ù„ÙŠÙ…',
        'about.experience': 'Ø§Ù„Ø®Ø¨Ø±Ø©',
        'about.languages': 'Ø§Ù„Ù„ØºØ§Øª',
        
        // Projects
        'projects.title': 'Ù…Ø´Ø§Ø±ÙŠØ¹ÙŠ',
        'projects.viewProject': 'Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹',
        'projects.sourceCode': 'Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ù…ØµØ¯Ø±ÙŠ',
        
        // Skills
        'skills.title': 'Ù…Ù‡Ø§Ø±Ø§ØªÙŠ',
        'skills.frontend': 'Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø£Ù…Ø§Ù…ÙŠØ©',
        'skills.backend': 'Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø®Ù„ÙÙŠØ©',
        'skills.database': 'Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª',
        'skills.tools': 'Ø§Ù„Ø£Ø¯ÙˆØ§Øª',
        
        // Services
        'services.title': 'Ø®Ø¯Ù…Ø§ØªÙŠ',
        'services.webDev': 'ØªØ·ÙˆÙŠØ± Ø§Ù„ÙˆÙŠØ¨',
        'services.mobileDev': 'ØªØ·ÙˆÙŠØ± Ø§Ù„Ø¬ÙˆØ§Ù„',
        'services.consulting': 'Ø§Ù„Ø§Ø³ØªØ´Ø§Ø±Ø§Øª',
        
        // Thanks
        'thanks.title': 'ğŸ‰ Ø´ÙƒØ±Ø§Ù‹ Ù„Ùƒ Ø¹Ù„Ù‰ Ø±Ø³Ø§Ù„ØªÙƒ!',
        'thanks.message': 'ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ù„ØªÙƒ Ø¨Ù†Ø¬Ø§Ø­. Ø³Ø£ØªÙˆØ§ØµÙ„ Ù…Ø¹Ùƒ Ù‚Ø±ÙŠØ¨Ø§Ù‹ Ø¬Ø¯Ø§Ù‹.',
        'thanks.backHome': 'Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ©',
        'thanks.viewProjects': 'Ø¹Ø±Ø¶ Ù…Ø´Ø§Ø±ÙŠØ¹ÙŠ'
    }
};

// Gestion de la langue
class LanguageManager {
    constructor() {
        this.currentLanguage = localStorage.getItem('selectedLanguage') || 'fr';
        this.init();
    }
    
    init() {
        this.createLanguageSelector();
        this.translatePage();
        this.setupEventListeners();
    }
    
    createLanguageSelector() {
        const header = document.querySelector('header .menu-container');
        if (!header) return;
        
        const langSelector = document.createElement('div');
        langSelector.className = 'language-selector';
        langSelector.innerHTML = `
            <button class="lang-toggle" aria-label="Select language">
                <span class="flag">${this.getFlagEmoji(this.currentLanguage)}</span>
                <span class="lang-code">${this.currentLanguage.toUpperCase()}</span>
            </button>
            <div class="lang-dropdown">
                <button class="lang-option" data-lang="fr">
                    <span class="flag">ğŸ‡«ğŸ‡·</span> FranÃ§ais
                </button>
                <button class="lang-option" data-lang="en">
                    <span class="flag">ğŸ‡ºğŸ‡¸</span> English
                </button>
                <button class="lang-option" data-lang="ru">
                    <span class="flag">ğŸ‡·ğŸ‡º</span> Ğ ÑƒÑÑĞºĞ¸Ğ¹
                </button>
                <button class="lang-option" data-lang="ar">
                    <span class="flag">ğŸ‡¸ğŸ‡¦</span> Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©
                </button>
            </div>
        `;
        
        header.appendChild(langSelector);
    }
    
    getFlagEmoji(lang) {
        const flags = {
            'fr': 'ğŸ‡«ğŸ‡·',
            'en': 'ğŸ‡ºğŸ‡¸', 
            'ru': 'ğŸ‡·ğŸ‡º',
            'ar': 'ğŸ‡¸ğŸ‡¦'
        };
        return flags[lang] || 'ğŸŒ';
    }
    
    setupEventListeners() {
        const langToggle = document.querySelector('.lang-toggle');
        const langDropdown = document.querySelector('.lang-dropdown');
        const langOptions = document.querySelectorAll('.lang-option');
        
        if (langToggle) {
            langToggle.addEventListener('click', () => {
                langDropdown.classList.toggle('active');
            });
        }
        
        langOptions.forEach(option => {
            option.addEventListener('click', (e) => {
                const selectedLang = e.currentTarget.dataset.lang;
                this.changeLanguage(selectedLang);
                langDropdown.classList.remove('active');
            });
        });
        
        // Fermer le dropdown en cliquant ailleurs
        document.addEventListener('click', (e) => {
            if (!e.target.closest('.language-selector')) {
                langDropdown?.classList.remove('active');
            }
        });
    }
    
    changeLanguage(newLang) {
        this.currentLanguage = newLang;
        localStorage.setItem('selectedLanguage', newLang);
        
        // Mettre Ã  jour le bouton de langue
        const langToggle = document.querySelector('.lang-toggle');
        if (langToggle) {
            langToggle.querySelector('.flag').textContent = this.getFlagEmoji(newLang);
            langToggle.querySelector('.lang-code').textContent = newLang.toUpperCase();
        }
        
        // Mettre Ã  jour la direction du texte pour l'arabe
        document.documentElement.dir = newLang === 'ar' ? 'rtl' : 'ltr';
        document.documentElement.lang = newLang;
        
        this.translatePage();
    }
    
    translatePage() {
        const elements = document.querySelectorAll('[data-translate]');
        elements.forEach(element => {
            const key = element.getAttribute('data-translate');
            const translation = this.getTranslation(key);
            
            if (translation) {
                if (element.tagName === 'INPUT' && element.type !== 'submit') {
                    element.placeholder = translation;
                } else if (element.tagName === 'TEXTAREA') {
                    element.placeholder = translation;
                } else {
                    element.textContent = translation;
                }
            }
        });
        
        // Mettre Ã  jour le titre de la page
        const pageTitle = document.querySelector('title');
        if (pageTitle && pageTitle.hasAttribute('data-translate')) {
            const key = pageTitle.getAttribute('data-translate');
            const translation = this.getTranslation(key);
            if (translation) {
                pageTitle.textContent = translation;
            }
        }
    }
    
    getTranslation(key) {
        return translations[this.currentLanguage]?.[key] || translations['fr'][key] || key;
    }
}

// Initialiser le gestionnaire de langue quand le DOM est chargÃ©
document.addEventListener('DOMContentLoaded', () => {
    new LanguageManager();
});

// Exporter pour utilisation dans d'autres fichiers
window.LanguageManager = LanguageManager;
